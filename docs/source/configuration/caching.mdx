---
title: Caching in the Apollo Router
---

The Apollo Router comes with an in-memory cache, used to store Automated Persisted Queries (APQ) and query plans.
This is a Least Recently Used (LRU) cache, that can be configured as follows:

```yaml title="router.yaml"
supergraph:
  apq:
    cache:
      in_memory:
        limit: 512
  query_planning:
    cache:
      in_memory:
        limit: 512
```

Introspection responses are cached too, but that cache is not configurable for now.

## Redis cache

The Apollo Router has an external storage cache, using Redis Cluster or a single Redis instance (if you provide only one url).

This will activate a configuration option to connect to a Redis Cluster:

```yaml
supergraph:
  apq:
    cache:
      in_memory:
        limit: 512
      redis:
        urls: ["redis://..."]
  query_planning:
    cache:
      in_memory:
        limit: 512
      redis:
        urls: ["redis://..."]
```
